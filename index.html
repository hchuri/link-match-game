<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LINK - Í≤∞Ï†ïÏùò ÏàúÍ∞Ñ</title>
    
    <!-- ÌïÑÏàò ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #0f172a; color: white; overflow-x: hidden; }
        
        /* Ïò§Î°úÎùº Î∞∞Í≤Ω */
        .aurora-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(at 0% 0%, #312e81 0, transparent 50%), 
                        radial-gradient(at 50% 0%, #4c1d95 0, transparent 50%), 
                        radial-gradient(at 100% 0%, #831843 0, transparent 50%);
            background-size: 200% 200%;
            animation: aurora 15s ease infinite;
        }
        @keyframes aurora { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

        /* Ïú†Î¶¨ ÏßàÍ∞ê */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* ÌÖçÏä§Ìä∏ ÎÑ§Ïò® Ìö®Í≥º */
        .neon-text { text-shadow: 0 0 10px rgba(255,255,255,0.5), 0 0 20px rgba(236, 72, 153, 0.5); }
        .animate-slide-up { animation: slideUp 0.5s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Î£∞Î†õ Ìè¨Ïù∏ÌÑ∞ Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes pointer-bounce { 
            0%, 100% { transform: translate(-50%, -5px); } 
            50% { transform: translate(-50%, -15px); } 
        }
        .pointer-anim { animation: pointer-bounce 1s infinite; }

        /* ÎèôÏ†Ñ 3D Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .coin-container { perspective: 1000px; }
        .coin {
            width: 240px; height: 240px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .coin-face {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            border-radius: 50%;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3), 0 10px 20px rgba(0,0,0,0.4);
            border: 8px solid rgba(255,255,255,0.2);
        }
        .coin-front { 
            background: linear-gradient(135deg, #fbbf24, #d97706); 
            transform: rotateY(0deg); 
            color: #78350f;
        }
        .coin-back { 
            background: linear-gradient(135deg, #94a3b8, #475569); 
            transform: rotateY(180deg);
            color: #1e293b;
        }
        /* Î°úÎî© Ïä§ÌîºÎÑà */
        .spinner { border: 3px solid rgba(255,255,255,0.3); border-radius: 50%; border-top: 3px solid white; width: 16px; height: 16px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="flex flex-col min-h-screen text-white">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { flushSync } = ReactDOM;

        // --- Î≤àÏó≠ Îç∞Ïù¥ÌÑ∞ ---
        const T = {
            ko: {
                subtitle: "Í≤∞Ï†ïÏùò ÏàúÍ∞Ñ, ÎãπÏã†ÏóêÍ≤å ÌïÑÏöîÌïú ÎèÑÌååÎØº",
                ladderTitle: "ÎÑàÏôÄ ÎÇòÏùò Ïó∞Í≤∞Í≥†Î¶¨!!",
                ladderDesc: "ÎñºÏñ¥ÎÜìÏùÑ Ïàò ÏóÜÎäî Ïö¥Î™ÖÏùò ÏÇ¨Îã§Î¶¨",
                rouletteTitle: "Ïö∞Ïú†Î∂ÄÎã® Ï≤òÎ∞©Ï†Ñ",
                rouletteDesc: "Í≥†ÎØºÏùÄ Ïù¥Ï†ú Í∑∏Îßå!",
                coinTitle: "ÎπºÎ∞ï Í±∏Î¶º",
                coinDesc: "ÏïûÎí§ Ïû¥ Í≤É ÏóÜÏù¥ Îî± Ï†ïÌï®!",
                home: "Ï≤òÏùåÏúºÎ°ú",
                setting: "ÏÑ§Ï†ï",
                refresh: "Îã§Ïãú ÏÑûÍ∏∞",
                result: "Ï†ÑÏ≤¥ Í≤∞Í≥º",
                start: "Í≤åÏûÑ ÏãúÏûë",
                countMode: "Ïà´Ïûê ÏÑ§Ï†ï",
                manualMode: "ÏßÅÏ†ë ÏûÖÎ†•",
                countLabel: "Ï∞∏Í∞Ä Ïù∏Ïõê:",
                groupA: "Group A (Ïù∏Î¨º)",
                groupB: "Group B (Ïû•ÏÜå)",
                add: "Ï∂îÍ∞Ä",
                winner: "ÎãπÏ≤®!",
                close: "Îã´Í∏∞",
                spin: "SPIN!",
                stop: "STOP!",
                stopping: "Î©àÏ∂îÎäî Ï§ë...",
                optionList: "ÏòµÏÖò Î™©Î°ù",
                optionPlaceholder: "ÏòµÏÖò Ï∂îÍ∞Ä...",
                aiFill: "AI ÏûêÎèôÏôÑÏÑ±",
                aiRecommend: "AI Ï∂îÏ≤ú",
                alertTwo: "2Í∞ú Ïù¥ÏÉÅ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!",
                alertTopic: "Ï£ºÏ†úÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!",
                aiLoading: "ÏÉùÏÑ± Ï§ë...",
                aiDone: "AIÍ∞Ä Î¶¨Ïä§Ìä∏Î•º ÏÉùÏÑ±ÌñàÏäµÎãàÎã§!",
                aiFail: "AI Ïó∞Í≤∞ Ïã§Ìå®",
                aiPromptFill: "Group B(Í≤∞Í≥º)Î•º Ï±ÑÏö∏ Ï£ºÏ†úÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî!\n(Ïòà: Ï†êÏã¨Î©îÎâ¥, Î≤åÏπô, Í∞ÑÏãù)",
                ladderResultTitle: "Îß§Ïπ≠ Í≤∞Í≥º",
                coinFlip: "FLIP!",
                coinFront: "YES",
                coinBack: "NO",
                coinRes: "Í≤∞Í≥º: "
            },
            en: {
                subtitle: "Dopamine for your decisions",
                ladderTitle: "Destiny Link",
                ladderDesc: "Inseparable connection",
                rouletteTitle: "Indecision Cure",
                rouletteDesc: "Stop hesitating, Spin it!",
                coinTitle: "No Way Out!",
                coinDesc: "Heads or Tails? It's decided.",
                home: "HOME",
                setting: "SETUP",
                refresh: "SHUFFLE",
                result: "ALL RESULTS",
                start: "GAME START",
                countMode: "Count",
                manualMode: "Manual",
                countLabel: "Players:",
                groupA: "Group A (Who)",
                groupB: "Group B (Where)",
                add: "Add",
                winner: "WINNER!",
                close: "CLOSE",
                spin: "SPIN!",
                stop: "STOP!",
                stopping: "Stopping...",
                optionList: "Options",
                optionPlaceholder: "Add option...",
                aiFill: "AI Auto-fill",
                aiRecommend: "AI Suggest",
                alertTwo: "Enter at least 2 items!",
                alertTopic: "Please enter a topic!",
                aiLoading: "Generating...",
                aiDone: "AI generated the list!",
                aiFail: "AI Connection Failed",
                aiPromptFill: "Enter a topic for Group B results!\n(e.g., Lunch menu, Penalty)",
                ladderResultTitle: "MATCHING RESULT",
                coinFlip: "FLIP!",
                coinFront: "YES",
                coinBack: "NO",
                coinRes: "Result: "
            }
        };

        // --- Îç∞Ïù¥ÌÑ∞ ---
        const PALETTE = ['#FF007A', '#7000FF', '#00F2FF', '#FFD600', '#00FF9D', '#FF4D00', '#9D00FF', '#008CFF'];
        const getColor = (i) => PALETTE[i % PALETTE.length];
        const shuffle = (arr) => [...arr].sort(() => Math.random() - 0.5);

        const BIBLE_FIGURES_KO = ["ÏïÑÎã¥", "ÌïòÏôÄ", "ÎÖ∏ÏïÑ", "ÏïÑÎ∏åÎùºÌï®", "ÏÇ¨Îùº", "Ïù¥ÏÇ≠", "ÏïºÍ≥±", "ÏöîÏÖâ", "Î™®ÏÑ∏", "ÏïÑÎ°†", "Ïó¨Ìò∏ÏàòÏïÑ", "Í∞àÎ†ô", "Í∏∞ÎìúÏò®", "ÏÇºÏÜê", "Î£®Ìä∏", "ÏÇ¨Î¨¥Ïóò", "ÏÇ¨Ïö∏", "Îã§Ïúó", "ÏÜîÎ°úÎ™¨", "ÏóòÎ¶¨Ïïº", "ÏóòÎ¶¨ÏÇ¨", "Ïù¥ÏÇ¨Ïïº", "ÏòàÎ†àÎØ∏Ïïº", "ÏóêÏä§Í≤î", "Îã§ÎãàÏóò", "Ìò∏ÏÑ∏ÏïÑ", "ÏöîÏóò", "ÏïÑÎ™®Ïä§", "Ïò§Î∞îÎåú", "ÏöîÎÇò", "ÎØ∏Í∞Ä", "ÎÇòÌõî", "ÌïòÎ∞ïÍµ≠", "Ïä§Î∞îÎÉê", "ÌïôÍ∞ú", "Ïä§Í∞ÄÎû¥", "ÎßêÎùºÍ∏∞", "ÎßàÌÉú", "ÎßàÍ∞Ä", "ÎàÑÍ∞Ä", "ÏöîÌïú", "Î≤†ÎìúÎ°ú", "ÏïàÎìúÎ†à", "ÏïºÍ≥†Î≥¥", "ÎπåÎ¶Ω", "Î∞îÎèåÎ°úÎß§", "ÎèÑÎßà", "ÎßàÌÉúÏò§", "ÏãúÎ™¨", "Ïú†Îã§", "Î∞îÏö∏", "Î∞îÎÇòÎ∞î", "ÎîîÎ™®Îç∞", "ÎîîÎèÑ", "ÎπåÎ†àÎ™¨", "Ïä§Îç∞Î∞ò"];
        const BIBLE_FIGURES_EN = ["Adam", "Eve", "Noah", "Abraham", "Sarah", "Isaac", "Jacob", "Joseph", "Moses", "Aaron", "Joshua", "Caleb", "Gideon", "Samson", "Ruth", "Samuel", "Saul", "David", "Solomon", "Elijah", "Elisha", "Isaiah", "Jeremiah", "Ezekiel", "Daniel", "Hosea", "Joel", "Amos", "Obadiah", "Jonah", "Micah", "Nahum", "Habakkuk", "Zephaniah", "Haggai", "Zechariah", "Malachi", "Matthew", "Mark", "Luke", "John", "Peter", "Andrew", "James", "Philip", "Bartholomew", "Thomas", "Matthew", "Simon", "Judas", "Paul", "Barnabas", "Timothy", "Titus", "Philemon", "Stephen"];

        const BIBLE_PLACES_KO = ["ÏóêÎç¥", "ÏïÑÎùºÎûè", "Î∞îÎ≤®", "Ïö∞Î•¥", "ÌïòÎûÄ", "Í∞ÄÎÇòÏïà", "Ïï†ÍµΩ", "ÏÜåÎèî", "Í≥†Î™®Îùº", "Î∏åÏóòÏÑ∏Î∞î", "Ìó§Î∏åÎ°†", "Î≤ßÏóò", "ÏÑ∏Í≤ú", "Î™®Î¶¨ÏïÑ", "ÎØ∏ÎîîÏïà", "ÏãúÎÇ¥ÏÇ∞", "Í∞ÄÎç∞Ïä§Î∞îÎÑ§ÏïÑ", "Ïó¨Î¶¨Í≥†", "ÏïÑÏù¥", "Í∏∞Î∏åÏò®", "Í∏∏Í∞à", "Ïã§Î°ú", "ÎØ∏Ïä§Î∞î", "ÎùºÎßà", "ÎÜâ", "ÏïÑÎëòÎûå", "ÏóîÍ≤åÎîî", "ÏãúÍ∏ÄÎùΩ", "ÏòàÎ£®ÏÇ¥Î†ò", "ÏãúÏò®", "ÎëêÎ°ú", "ÏãúÎèà", "Í∞àÎ©úÏÇ∞", "Ìò∏Î†ôÏÇ∞", "ÏÇ¨ÎßàÎ¶¨ÏïÑ", "ÏöîÎã®Í∞ï", "Í∞àÎ¶¥Î¶¨", "ÎÇòÏÇ¨Î†õ", "Í∞ÄÎ≤ÑÎÇòÏõÄ", "Î≤†Îì§Î†àÌó¥", "Í∞êÎûåÏÇ∞", "Í≤üÏÑ∏ÎßàÎÑ§", "Í≥®Í≥†Îã§", "Ïó†ÎßàÏò§", "Îã§Î©îÏÑπ", "ÏïàÎîîÏò•", "Íµ¨Î∏åÎ°ú", "ÎπåÎ¶ΩÎ≥¥", "Îç∞ÏÇ¥Î°úÎãàÍ∞Ä", "Î≤†Î¢∞ÏïÑ", "ÏïÑÎç¥", "Í≥†Î¶∞ÎèÑ", "ÏóêÎ≤†ÏÜå", "Î°úÎßà", "Î∞ßÎ™®"];
        const BIBLE_PLACES_EN = ["Eden", "Ararat", "Babel", "Ur", "Haran", "Canaan", "Egypt", "Sodom", "Gomorrah", "Beersheba", "Hebron", "Bethel", "Shechem", "Moriah", "Midian", "Sinai", "Kadesh", "Jericho", "Ai", "Gibeon", "Gilgal", "Shiloh", "Mizpah", "Ramah", "Nob", "Adullam", "Engedi", "Ziklag", "Jerusalem", "Zion", "Tyre", "Sidon", "Carmel", "Horeb", "Samaria", "Jordan", "Galilee", "Nazareth", "Capernaum", "Bethlehem", "Olives", "Gethsemane", "Golgotha", "Emmaus", "Damascus", "Antioch", "Cyprus", "Philippi", "Thessalonica", "Berea", "Athens", "Corinth", "Ephesus", "Rome", "Patmos"];

        const ROULETTE_DEFAULT_KO = ["ÏπòÌÇ®", "ÌîºÏûê", "ÌñÑÎ≤ÑÍ±∞", "Ï¥àÎ∞•", "ÏÇºÍ≤πÏÇ¥", "Îñ°Î≥∂Ïù¥", "Ï°±Î∞ú", "Î≥¥Ïåà", "ÏßúÏû•Î©¥", "ÌååÏä§ÌÉÄ"];
        const ROULETTE_DEFAULT_EN = ["Chicken", "Pizza", "Burger", "Sushi", "BBQ", "Tteokbokki", "Pasta", "Salad", "Steak", "Tacos"];

        // --- ÏïÑÏù¥ÏΩò ---
        const Icon = ({ d, className }) => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d} /></svg>;
        const I_Home = () => <Icon d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z M9 22V12h6v10" className="w-5 h-5"/>;
        const I_Setting = () => <Icon d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" className="w-5 h-5"/>;
        const I_Refresh = () => <Icon d="M23 4v6h-6 M1 20v-6h6 M3.51 9a9 9 0 0 1 14.85-3.36L23 10 M1 14l4.64 4.36A9 9 0 0 0 20.49 15" className="w-5 h-5"/>;
        const I_Zap = () => <Icon d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" className="w-5 h-5"/>;
        const I_Play = () => <Icon d="M5 3l14 9-14 9V3z" className="w-6 h-6 fill-current"/>;
        const I_Check = () => <Icon d="M20 6L9 17l-5-5" className="w-5 h-5"/>;
        const I_ArrowRight = () => <Icon d="M5 12h14 M12 5l7 7-7 7" className="w-5 h-5 text-gray-500"/>;
        const I_Star = () => <Icon d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" className="w-4 h-4"/>;
        
        const I_Pointer = () => (
            <svg width="40" height="40" viewBox="0 0 24 24" fill="white" className="drop-shadow-lg filter">
                <path d="M12 21L3 6h18L12 21z" />
            </svg>
        );

        // --- Gemini API Ìò∏Ï∂ú (ÏûêÎèô Ï£ºÏûÖÎêú ÌÇ§ ÏÇ¨Ïö©) ---
        const apiKey = ""; 

        async function fetchGeminiOptions(topic, count, lang) {
            try {
                const prompt = lang === 'ko' 
                    ? `Ï£ºÏ†ú '${topic}'Ïóê Ïñ¥Ïö∏Î¶¨Îäî Ïû¨ÎØ∏ÏûàÍ≥† Ï∞ΩÏùòÏ†ÅÏù∏ ÏòµÏÖò ${count}Í∞ÄÏßÄÎ•º Ï∂îÏ≤úÌï¥Ï§ò. ÏßßÏùÄ Îã®Ïñ¥(ÏµúÎåÄ 6Í∏ÄÏûê) ÏúÑÏ£ºÎ°ú. JSON Î¨∏ÏûêÏó¥ Î∞∞Ïó¥ Ìè¨Îß∑(["ÏòµÏÖò1", "ÏòµÏÖò2", ...])ÏúºÎ°úÎßå ÎãµÎ≥ÄÌï¥.` 
                    : `Suggest ${count} creative options for '${topic}'. Short words. Reply ONLY with JSON string array format (["Op1", "Op2", ...]).`;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text.replace(/```json|```/g, '').trim();
                return JSON.parse(text);
            } catch (error) { return null; }
        }

        // --- Î©îÏù∏ Ïï± ---
        function App() {
            const [view, setView] = useState('home');
            const [lang, setLang] = useState('ko');
            const t = T[lang];

            return (
                <>
                    <div className="aurora-bg"></div>
                    <div className="max-w-6xl mx-auto px-4 py-8 min-h-screen flex flex-col">
                        <header className="mb-10 text-center relative z-20">
                            <h1 className="text-6xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 via-white to-pink-500 drop-shadow-2xl cursor-pointer tracking-tighter"
                                onClick={() => setView('home')}>
                                LINK
                            </h1>
                            <p className="text-gray-300 text-sm md:text-base font-bold tracking-[0.5em] mt-2 opacity-80">{t.subtitle}</p>
                            
                            <div className="flex justify-center mt-4">
                                <div className="bg-white/10 backdrop-blur-md rounded-full p-1 flex items-center border border-white/20 relative">
                                    <div className={`absolute top-1 bottom-1 w-[calc(50%-4px)] bg-pink-500 rounded-full transition-all duration-300 ${lang === 'ko' ? 'left-1' : 'left-[calc(50%+3px)]'}`}></div>
                                    <button onClick={() => setLang('ko')} className={`relative z-10 px-4 py-1 text-xs font-bold transition-colors ${lang === 'ko' ? 'text-white' : 'text-gray-400'}`}>ÌïúÍµ≠Ïñ¥</button>
                                    <button onClick={() => setLang('en')} className={`relative z-10 px-4 py-1 text-xs font-bold transition-colors ${lang === 'en' ? 'text-white' : 'text-gray-400'}`}>English</button>
                                </div>
                            </div>
                        </header>

                        <div className="flex-1 relative z-10">
                            {view === 'home' && <HomeView setView={setView} t={t} />}
                            {view === 'ladder' && <LadderGame goHome={() => setView('home')} lang={lang} t={t} />}
                            {view === 'roulette' && <RouletteGame goHome={() => setView('home')} lang={lang} t={t} />}
                            {view === 'coin' && <CoinGame goHome={() => setView('home')} lang={lang} t={t} />}
                        </div>
                    </div>
                </>
            );
        }

        // --- Ìôà ÌôîÎ©¥ (3Î∂ÑÌï†) ---
        function HomeView({ setView, t }) {
            return (
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6 h-full py-6 animate-slide-up">
                    <button onClick={() => setView('ladder')} className="glass group p-8 rounded-[2rem] flex flex-col items-center justify-center gap-6 hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95 border-t-4 border-pink-500/50 shadow-2xl">
                        <div className="text-7xl group-hover:rotate-12 transition-transform drop-shadow-lg">üé≤</div>
                        <div className="text-center">
                            <h2 className="text-2xl font-black text-pink-200 mb-1">{t.ladderTitle}</h2>
                            <p className="text-pink-100/60 text-xs font-medium">{t.ladderDesc}</p>
                        </div>
                    </button>
                    <button onClick={() => setView('roulette')} className="glass group p-8 rounded-[2rem] flex flex-col items-center justify-center gap-6 hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95 border-t-4 border-cyan-500/50 shadow-2xl">
                        <div className="text-7xl group-hover:-rotate-12 transition-transform drop-shadow-lg">üé°</div>
                        <div className="text-center">
                            <h2 className="text-2xl font-black text-cyan-200 mb-1">{t.rouletteTitle}</h2>
                            <p className="text-cyan-100/60 text-xs font-medium">{t.rouletteDesc}</p>
                        </div>
                    </button>
                    <button onClick={() => setView('coin')} className="glass group p-8 rounded-[2rem] flex flex-col items-center justify-center gap-6 hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95 border-t-4 border-yellow-500/50 shadow-2xl">
                        <div className="text-7xl group-hover:rotate-y-180 transition-transform duration-700 drop-shadow-lg">ü™ô</div>
                        <div className="text-center">
                            <h2 className="text-2xl font-black text-yellow-200 mb-1">{t.coinTitle}</h2>
                            <p className="text-yellow-100/60 text-xs font-medium">{t.coinDesc}</p>
                        </div>
                    </button>
                </div>
            );
        }

        // --- ÏÇ¨Îã§Î¶¨ Í≤åÏûÑ ---
        function LadderGame({ goHome, lang, t }) {
            const [mode, setMode] = useState('setup');
            const [inputType, setInputType] = useState('count');
            const [count, setCount] = useState(4);
            const [namesA, setNamesA] = useState([]);
            const [namesB, setNamesB] = useState([]);
            const [isAiLoading, setIsAiLoading] = useState(false);
            
            const [ladders, setLadders] = useState([]); 
            const [paths, setPaths] = useState([]); 
            const [activePath, setActivePath] = useState(null); 
            const [results, setResults] = useState({}); 
            const [isAnimating, setIsAnimating] = useState(false);
            const [showResultList, setShowResultList] = useState(false);
            
            const canvasRef = useRef(null);
            const stopAnimationRef = useRef(null);
            
            const GAP = 80; const PAD = 50; const HEIGHT = 400; const STEPS = 12; const STEP_H = HEIGHT / STEPS;
            const TOTAL_W = Math.max((count - 1) * GAP + PAD * 2, 320);

            useEffect(() => {
                const fig = lang === 'ko' ? BIBLE_FIGURES_KO : BIBLE_FIGURES_EN;
                const plc = lang === 'ko' ? BIBLE_PLACES_KO : BIBLE_PLACES_EN;
                setNamesA(shuffle(fig).slice(0, count));
                setNamesB(shuffle(plc).slice(0, count));
            }, [lang]);

            const handleAiFillB = async () => {
                const topic = prompt(t.aiPromptFill);
                if (!topic) return;
                setIsAiLoading(true);
                const generated = await fetchGeminiOptions(topic, count, lang);
                setIsAiLoading(false);
                if (generated) {
                    let newB = [...generated]; while(newB.length < count) newB.push("-");
                    setNamesB(newB.slice(0, count)); alert(t.aiDone);
                } else { alert(t.aiFail); }
            };

            const initGame = () => {
                const bridges = [];
                for(let c=0; c<count-1; c++) {
                    for(let r=0; r<STEPS-1; r++) {
                        const hasLeft = bridges.some(b => b.c === c-1 && b.r === r);
                        if (!hasLeft && Math.random() > 0.55) bridges.push({ c, r });
                    }
                }
                setLadders(bridges); setPaths([]); setResults({}); setActivePath(null); setShowResultList(false); setMode('playing'); setIsAnimating(false);
            };

            const updateCount = (delta) => {
                const newCount = Math.max(2, Math.min(15, count + delta));
                setCount(newCount);
                const fig = lang === 'ko' ? BIBLE_FIGURES_KO : BIBLE_FIGURES_EN;
                const plc = lang === 'ko' ? BIBLE_PLACES_KO : BIBLE_PLACES_EN;
                if (inputType === 'count') {
                    setNamesA(shuffle(fig).slice(0, newCount));
                    setNamesB(shuffle(plc).slice(0, newCount));
                } else {
                    const newA = [...namesA]; const newB = [...namesB];
                    while(newA.length < newCount) newA.push(`A${newA.length+1}`); while(newB.length < newCount) newB.push(`B${newB.length+1}`);
                    setNamesA(newA.slice(0, newCount)); setNamesB(newB.slice(0, newCount));
                }
            };

            const updateName = (side, idx, val) => { if (side === 'A') { const newA = [...namesA]; newA[idx] = val; setNamesA(newA); } else { const newB = [...namesB]; newB[idx] = val; setNamesB(newB); } };

            const getPath = (startIdx) => {
                let c = startIdx; let points = [{x: PAD + c*GAP, y: 0}];
                for(let r=0; r<STEPS; r++) {
                    const y = (r+1)*STEP_H - (STEP_H/2); points.push({x: PAD + c*GAP, y: y});
                    const br = ladders.find(b => b.c === c && b.r === r); const bl = ladders.find(b => b.c === c-1 && b.r === r);
                    if (br) { c++; points.push({x: PAD + c*GAP, y: y}); } else if (bl) { c--; points.push({x: PAD + c*GAP, y: y}); }
                    if (r === STEPS-1) points.push({x: PAD + c*GAP, y: HEIGHT});
                }
                return { points, endIdx: c };
            };

            const handleGlobalClick = () => { if (stopAnimationRef.current) stopAnimationRef.current(); };
            const play = async (idx) => {
                if (results[idx] !== undefined) return;
                if (isAnimating && stopAnimationRef.current) { stopAnimationRef.current(); setTimeout(() => startAnimation(idx), 50); } else { startAnimation(idx); }
            };

            const startAnimation = async (idx) => {
                setIsAnimating(true); const { points, endIdx } = getPath(idx); const color = getColor(idx);
                let isCancelled = false;
                stopAnimationRef.current = () => { isCancelled = true; finalize(idx, endIdx, points, color); };
                for (let i = 1; i < points.length; i++) {
                    if (isCancelled) break;
                    await new Promise(r => setTimeout(r, 40));
                    flushSync(() => { setActivePath({ points: points.slice(0, i+1), color }); });
                }
                if (!isCancelled) finalize(idx, endIdx, points, color);
            };

            const finalize = (idx, endIdx, points, color) => {
                stopAnimationRef.current = null;
                flushSync(() => {
                    setPaths(prev => [...prev, { startIdx: idx, endIdx, points, color }]);
                    setResults(prev => {
                        const newResults = { ...prev, [idx]: endIdx };
                        if (Object.keys(newResults).length === count) setTimeout(() => setShowResultList(true), 500);
                        return newResults;
                    });
                    setActivePath(null); setIsAnimating(false);
                });
            };

            const revealAll = () => {
                if (stopAnimationRef.current) stopAnimationRef.current();
                const newPaths = []; const newResults = {};
                for (let i=0; i<count; i++) {
                    if (results[i] === undefined) {
                        const { points, endIdx } = getPath(i);
                        newPaths.push({ startIdx: i, endIdx, points, color: getColor(i) });
                        newResults[i] = endIdx;
                    }
                }
                setPaths(prev => [...prev, ...newPaths]); setResults(prev => ({ ...prev, ...newResults })); setShowResultList(true);
            };

            useEffect(() => {
                if (mode !== 'playing' || !canvasRef.current) return;
                const canvas = canvasRef.current; const ctx = canvas.getContext('2d');
                canvas.width = TOTAL_W; canvas.height = HEIGHT;
                ctx.clearRect(0, 0, TOTAL_W, HEIGHT); ctx.lineCap = 'round'; ctx.lineJoin = 'round';
                ctx.lineWidth = 4; ctx.strokeStyle = 'rgba(255,255,255,0.1)';
                for (let i=0; i<count; i++) { ctx.beginPath(); ctx.moveTo(PAD+i*GAP, 0); ctx.lineTo(PAD+i*GAP, HEIGHT); ctx.stroke(); }
                ladders.forEach(b => { const y = (b.r+1)*STEP_H - (STEP_H/2); ctx.beginPath(); ctx.moveTo(PAD+b.c*GAP, y); ctx.lineTo(PAD+(b.c+1)*GAP, y); ctx.stroke(); });
                paths.forEach(p => { ctx.lineWidth = 6; ctx.strokeStyle = p.color; ctx.shadowBlur = 10; ctx.shadowColor = p.color; ctx.beginPath(); ctx.moveTo(p.points[0].x, p.points[0].y); p.points.forEach(pt => ctx.lineTo(pt.x, pt.y)); ctx.stroke(); ctx.shadowBlur = 0; });
                if (activePath) { ctx.lineWidth = 6; ctx.strokeStyle = activePath.color; ctx.shadowBlur = 15; ctx.shadowColor = activePath.color; ctx.beginPath(); ctx.moveTo(activePath.points[0].x, activePath.points[0].y); activePath.points.forEach(pt => ctx.lineTo(pt.x, pt.y)); ctx.stroke(); ctx.shadowBlur = 0; }
            }, [ladders, paths, activePath, count, mode]);

            if (mode === 'setup') {
                return (
                    <div className="glass p-8 rounded-3xl animate-slide-up">
                        <div className="flex justify-between items-center mb-8 pb-4 border-b border-white/10">
                            <button onClick={goHome} className="text-gray-400 hover:text-white font-bold flex gap-2">‚Üê {t.home}</button>
                            <h2 className="text-2xl font-black text-pink-400">GAME SETUP</h2>
                        </div>
                        <div className="flex bg-black/40 p-1 rounded-xl mb-8">
                            <button onClick={() => setInputType('count')} className={`flex-1 py-3 rounded-lg font-bold transition-all ${inputType === 'count' ? 'bg-pink-600 text-white shadow-lg' : 'text-gray-500 hover:text-white'}`}>{t.countMode}</button>
                            <button onClick={() => setInputType('manual')} className={`flex-1 py-3 rounded-lg font-bold transition-all ${inputType === 'manual' ? 'bg-pink-600 text-white shadow-lg' : 'text-gray-500 hover:text-white'}`}>{t.manualMode}</button>
                        </div>
                        <div className="flex items-center justify-center gap-6 mb-8">
                            <button onClick={() => updateCount(-1)} className="w-12 h-12 bg-white/10 rounded-full text-2xl hover:bg-white/20">-</button>
                            <span className="text-4xl font-mono font-bold text-pink-400">{count}</span>
                            <button onClick={() => updateCount(1)} className="w-12 h-12 bg-white/10 rounded-full text-2xl hover:bg-white/20">+</button>
                        </div>
                        {inputType === 'manual' && (
                            <div className="grid grid-cols-2 gap-6 mb-8 max-h-60 overflow-y-auto">
                                <div className="space-y-2"><h3 className="text-pink-300 font-bold mb-2">{t.groupA}</h3>{namesA.map((n, i) => <input key={`a-${i}`} value={n} onChange={(e) => updateName('A', i, e.target.value)} className="w-full bg-black/30 border-b border-gray-600 px-2 py-1 outline-none"/>)}</div>
                                <div className="space-y-2">
                                    <h3 className="text-cyan-300 font-bold mb-2 flex items-center gap-2">{t.groupB} <button onClick={handleAiFillB} className="text-xs bg-gradient-to-r from-yellow-500 to-orange-500 text-black px-2 py-0.5 rounded-full hover:scale-105 transition-transform flex items-center gap-1" disabled={isAiLoading}>{isAiLoading ? <span className="spinner"></span> : <><I_Star/> {t.aiFill}</>}</button></h3>
                                    {namesB.map((n, i) => <input key={`b-${i}`} value={n} onChange={(e) => updateName('B', i, e.target.value)} className="w-full bg-black/30 border-b border-gray-600 px-2 py-1 outline-none"/>)}
                                </div>
                            </div>
                        )}
                        <button onClick={initGame} className="w-full bg-gradient-to-r from-pink-600 to-purple-600 py-4 rounded-2xl font-black text-xl shadow-xl hover:scale-[1.02] transition-transform">{t.start}</button>
                    </div>
                );
            }

            return (
                <div className="flex flex-col gap-6 animate-slide-up" onClick={handleGlobalClick}>
                    <div className="glass p-6 rounded-3xl relative">
                        <div className="flex flex-wrap justify-between items-center gap-4 mb-4 z-30 relative" onClick={e => e.stopPropagation()}>
                            <div className="flex gap-2">
                                <button onClick={goHome} className="bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full font-bold text-sm">‚Üê {t.home}</button>
                                <button onClick={() => setMode('setup')} className="bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full font-bold text-sm">‚Ü∫ {t.setting}</button>
                            </div>
                            <div className="flex gap-2">
                                <button onClick={initGame} className="bg-pink-600 hover:bg-pink-500 px-4 py-2 rounded-xl font-bold shadow-lg">{t.refresh}</button>
                                <button onClick={revealAll} className="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2 rounded-xl font-bold shadow-lg">‚ö° {t.result}</button>
                            </div>
                        </div>

                        {/* Title Added Above Game Area */}
                        <div className="text-center mb-4">
                            <h2 className="text-3xl font-black text-pink-300 drop-shadow-lg">{t.ladderTitle}</h2>
                            <p className="text-pink-100/60 text-sm">{t.ladderDesc}</p>
                        </div>

                        <div className="overflow-x-auto flex justify-center no-scrollbar pb-4" onClick={e => e.stopPropagation()}>
                            <div style={{ width: TOTAL_W, height: HEIGHT + 150, position: 'relative', marginTop: '120px' }} className="flex-shrink-0">
                                
                                <div className="absolute -top-24 w-full text-center font-bold text-xl text-pink-400 tracking-widest">{t.groupA}</div>
                                
                                <canvas ref={canvasRef} className="absolute top-0 left-0 pointer-events-none z-0" />
                                
                                {namesA.map((name, i) => (
                                    <div key={i} className="absolute flex flex-col items-center z-20" style={{ left: PAD + i*GAP, top: 0, transform: 'translateX(-50%)' }}>
                                        <span className="absolute -top-12 bg-gray-800 text-white text-xs px-2 py-1 rounded truncate max-w-[80px] border border-white/20">{name}</span>
                                        <button 
                                            onClick={(e) => { e.stopPropagation(); play(i); }} 
                                            disabled={results[i] !== undefined} 
                                            className={`w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg transition-transform ${results[i] !== undefined ? 'bg-white text-black ring-2' : 'bg-pink-500 hover:scale-110 text-white animate-bounce'}`} 
                                            style={results[i] !== undefined ? { borderColor: getColor(i), color: getColor(i) } : {}}
                                        >
                                            {results[i] !== undefined ? 'V' : i+1}
                                        </button>
                                    </div>
                                ))}

                                {namesB.map((name, i) => {
                                    const isTarget = Object.values(results).includes(i);
                                    const targetKey = Object.keys(results).find(key => results[key] === i);
                                    return (
                                        <div key={i} className="absolute flex flex-col items-center z-20" style={{ left: PAD + i*GAP, top: HEIGHT, transform: 'translateX(-50%)' }}>
                                            <div className={`w-10 h-10 rounded-full border-4 flex items-center justify-center font-bold text-sm bg-gray-900 transition-all ${isTarget ? 'scale-110 bg-white' : 'border-gray-700 text-gray-600'}`} style={isTarget ? { borderColor: getColor(targetKey), color: getColor(targetKey) } : {}}>{i+1}</div>
                                            <div className={`mt-2 text-cyan-300 font-bold break-keep text-center leading-tight opacity-90 ${lang === 'en' ? 'text-[10px] w-16' : 'text-sm w-4'}`} style={lang === 'ko' ? {writingMode: 'vertical-rl', textOrientation: 'upright'} : {}}>{name}</div>
                                        </div>
                                    );
                                })}
                                <div className="absolute w-full text-center font-bold text-xl text-cyan-400 tracking-widest" style={{ top: HEIGHT + 160 }}>{t.groupB}</div>
                            </div>
                        </div>
                    </div>

                    {showResultList && (
                        <div className="glass p-6 rounded-3xl animate-slide-up" onClick={e => e.stopPropagation()}>
                            <h3 className="text-xl font-bold text-yellow-400 mb-4 text-center tracking-widest">üèÜ {t.ladderResultTitle}</h3>
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-80 overflow-y-auto custom-scrollbar">
                                {namesA.map((startName, i) => {
                                    const endIdx = results[i];
                                    if (endIdx === undefined) return null;
                                    return (
                                        <div key={i} className="flex justify-between items-center bg-black/30 p-3 rounded-xl border border-white/5">
                                            <div className="flex items-center gap-3">
                                                <span className="w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold bg-white text-black" style={{color: getColor(i)}}>{i+1}</span>
                                                <span className="font-bold text-pink-200">{startName}</span>
                                            </div>
                                            <span className="text-white/30">‚ûú</span>
                                            <div className="flex items-center gap-3">
                                                <span className="font-bold text-cyan-200">{namesB[endIdx]}</span>
                                                <span className="w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold bg-gray-800 text-gray-400 border border-gray-600">{endIdx+1}</span>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // --- Î£∞Î†õ Í≤åÏûÑ ---
        function RouletteGame({ goHome, lang, t }) {
            const [items, setItems] = useState(lang === 'ko' ? ROULETTE_DEFAULT_KO : ROULETTE_DEFAULT_EN);
            const [input, setInput] = useState('');
            const [rotation, setRotation] = useState(0);
            const [isSpinning, setIsSpinning] = useState(false);
            const [isStopping, setIsStopping] = useState(false);
            const [winner, setWinner] = useState(null);
            const [isAiLoading, setIsAiLoading] = useState(false);
            
            const isStoppingRef = useRef(false);
            const speedRef = useRef(0);
            const animationRef = useRef(null);
            const canvasRef = useRef(null);
            const rotationRef = useRef(0);

            useEffect(() => {
                // Ïñ∏Ïñ¥ Î≥ÄÍ≤Ω Ïãú Î™©Î°ùÏù¥ ÎÑàÎ¨¥ Ï†ÅÍ±∞ÎÇò Î≥ÄÍ≤ΩÎêú Ï†Å ÏóÜÏúºÎ©¥ Í∏∞Î≥∏Í∞í Î°úÎìú
                if (items.length <= 1) {
                    setItems(lang === 'ko' ? ROULETTE_DEFAULT_KO : ROULETTE_DEFAULT_EN);
                }
            }, [lang]);

            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                const size = 450; const center = size/2; const radius = size/2 - 10;
                canvas.width = size; canvas.height = size;
                ctx.clearRect(0,0,size,size);
                ctx.translate(center, center);
                ctx.rotate(rotation);
                const arc = (2*Math.PI)/items.length;
                items.forEach((item, i) => {
                    const angle = i * arc;
                    ctx.beginPath(); ctx.moveTo(0,0); ctx.arc(0,0,radius,angle,angle+arc);
                    ctx.fillStyle = getColor(i); ctx.fill(); ctx.stroke();
                    ctx.save();
                    ctx.rotate(angle + arc/2); ctx.textAlign = "right"; ctx.fillStyle = "white"; ctx.font = "bold 20px Pretendard";
                    let text = item.length > 7 ? item.substring(0,6)+".." : item;
                    ctx.fillText(text, radius-20, 6);
                    ctx.restore();
                });
            }, [items, rotation]);

            const animate = () => {
                if (!isStoppingRef.current) {
                    if (speedRef.current < 0.5) speedRef.current += 0.01; 
                } else {
                    speedRef.current *= 0.96; 
                }

                rotationRef.current += speedRef.current;
                setRotation(rotationRef.current);

                if (isStoppingRef.current && speedRef.current < 0.002) {
                    cancelAnimationFrame(animationRef.current);
                    finishSpin();
                    return;
                }
                animationRef.current = requestAnimationFrame(animate);
            };

            const toggleSpin = () => {
                if (!isSpinning) {
                    if (items.length < 2) return alert(t.alertTwo);
                    setIsSpinning(true);
                    setIsStopping(false);
                    isStoppingRef.current = false; 
                    setWinner(null);
                    speedRef.current = 0;
                    animationRef.current = requestAnimationFrame(animate);
                } else if (!isStopping) {
                    setIsStopping(true);
                    isStoppingRef.current = true; 
                }
            };

            const finishSpin = () => {
                setIsSpinning(false);
                setIsStopping(false);
                
                const currentRot = rotationRef.current % (2 * Math.PI);
                let pointerAngle = (1.5 * Math.PI - currentRot); 
                if (pointerAngle < 0) pointerAngle += 2 * Math.PI;
                pointerAngle %= (2 * Math.PI);
                
                const index = Math.floor(pointerAngle / ((2 * Math.PI) / items.length));
                setWinner(items[index]);
            };

            const addItem = () => { if(input.trim() && items.length < 30) { setItems([...items, input]); setInput(''); }};
            const delItem = (i) => setItems(items.filter((_, idx) => idx !== i));
            
            const handleAiRecommend = async () => {
                if (!input.trim()) return alert(t.alertTopic);
                setIsAiLoading(true);
                const generated = await fetchGeminiOptions(input, 6, lang);
                setIsAiLoading(false);
                
                if (generated && Array.isArray(generated)) {
                    setItems(generated);
                    setInput("");
                } else {
                    alert(t.aiFail);
                }
            };

            return (
                <div className="glass p-8 rounded-3xl animate-slide-up">
                    <div className="flex justify-between items-center mb-8">
                        <button onClick={goHome} className="text-gray-400 hover:text-white font-bold flex gap-2">‚Üê {t.home}</button>
                        <div className="font-bold text-cyan-300">{t.rouletteTitle}</div>
                    </div>
                    <div className="flex flex-col lg:flex-row gap-10 items-center justify-center">
                        <div className="glass p-6 rounded-2xl w-full lg:w-80 self-start shadow-xl flex flex-col gap-4">
                            <div className="flex gap-2">
                                <input value={input} onChange={e=>setInput(e.target.value)} placeholder={t.optionPlaceholder} className="flex-1 bg-black/40 border-b border-white/20 px-3 py-2 outline-none text-white w-full min-w-0" onKeyDown={e=>e.key==='Enter'&&addItem()}/>
                            </div>
                            <div className="flex gap-2 mb-2">
                                <button onClick={addItem} className="bg-cyan-600 px-4 py-2 rounded-lg font-bold flex-1 hover:bg-cyan-500 transition">{t.add}</button>
                                <button onClick={handleAiRecommend} disabled={isAiLoading} className="bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 rounded-lg font-bold text-white flex-1 hover:scale-105 transition flex items-center justify-center gap-1">
                                   {isAiLoading ? <span className="spinner"></span> : <><I_Star/> {t.aiRecommend}</>}
                                </button>
                            </div>
                            <ul className="max-h-60 overflow-y-auto custom-scrollbar space-y-2">
                                {items.map((item, i) => (
                                    <li key={i} className="flex justify-between bg-white/5 p-2 rounded items-center">
                                        <span className="flex items-center gap-2 text-sm overflow-hidden"><span className="w-3 h-3 rounded-full flex-shrink-0" style={{background:getColor(i)}}></span><span className="truncate">{item}</span></span>
                                        <button onClick={()=>delItem(i)} className="text-gray-500 hover:text-red-500 px-2">√ó</button>
                                    </li>
                                ))}
                            </ul>
                        </div>
                        <div className="flex-1 flex flex-col items-center relative">
                            <div className="relative">
                                <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-4 pointer-anim z-50 drop-shadow-lg">
                                    <I_Pointer />
                                </div>
                                <canvas ref={canvasRef} className="w-[300px] h-[300px] md:w-[450px] md:h-[450px] rounded-full shadow-2xl border-8 border-white/10"></canvas>
                                <div className="absolute top-1/2 left-1/2 w-16 h-16 bg-white rounded-full -translate-x-1/2 -translate-y-1/2 flex items-center justify-center shadow-lg border-4 border-gray-200 text-black font-black text-xs">LINK</div>
                            </div>
                            <button onClick={toggleSpin} disabled={items.length < 2 || (isSpinning && isStopping)} className={`mt-10 px-12 py-4 rounded-full text-2xl font-black shadow-xl transition-all hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100 ${isSpinning ? 'bg-gradient-to-r from-red-500 to-pink-600' : 'bg-gradient-to-r from-cyan-500 to-blue-600'}`}>
                                {isSpinning ? (isStopping ? t.stopping : t.stop) : t.spin}
                            </button>
                        </div>
                    </div>
                    {winner && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md" onClick={() => setWinner(null)}>
                            <div className="glass p-10 rounded-[2.5rem] text-center max-w-sm w-full mx-6 pop-in border border-white/20" onClick={e => e.stopPropagation()}>
                                <div className="text-6xl mb-4">üéâ</div>
                                <h4 className="text-cyan-300 font-bold mb-4">{t.winner}</h4>
                                <div className="text-5xl font-black text-white neon-text mb-8 break-keep">{winner}</div>
                                <button onClick={() => setWinner(null)} className="text-gray-400 hover:text-white underline">{t.close}</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // --- ÎèôÏ†Ñ ÎçòÏßÄÍ∏∞ Í≤åÏûÑ (NEW) ---
        function CoinGame({ goHome, lang, t }) {
            const [isFlipping, setIsFlipping] = useState(false);
            const [result, setResult] = useState(null); // 'front' or 'back'
            const [rotation, setRotation] = useState(0);
            const [frontText, setFrontText] = useState(t.coinFront);
            const [backText, setBackText] = useState(t.coinBack);
            const [showInput, setShowInput] = useState(false);

            useEffect(() => {
                setFrontText(t.coinFront);
                setBackText(t.coinBack);
            }, [lang]);

            const flip = () => {
                if(isFlipping) return;
                setIsFlipping(true);
                setResult(null);

                const isFront = Math.random() > 0.5;
                const baseSpin = 1800; // 5Î∞îÌÄ¥
                const targetRotation = rotation + baseSpin + (isFront ? 0 : 180);
                
                let nextRot = rotation + 1800; 
                if (isFront) {
                    const rem = nextRot % 360;
                    if (rem !== 0) nextRot += (360 - rem);
                } else {
                    const rem = nextRot % 360;
                    if (rem !== 180) nextRot += (180 - rem + 360) % 360;
                }
                
                setRotation(nextRot);

                setTimeout(() => {
                    setIsFlipping(false);
                    setResult(isFront ? frontText : backText);
                }, 3000);
            };

            return (
                <div className="glass p-8 rounded-3xl animate-slide-up flex flex-col items-center min-h-[600px]">
                    
                    <div className="w-full flex justify-between items-center mb-10 relative">
                        <button onClick={goHome} className="absolute left-0 text-gray-400 hover:text-white font-bold flex gap-2 z-50">‚Üê {t.home}</button>
                        <div className="w-full text-center">
                            <div className="font-bold text-3xl text-yellow-300 drop-shadow-lg">{t.coinTitle}</div>
                            <div className="text-yellow-100/60 text-sm">{t.coinDesc}</div>
                        </div>
                        <button onClick={() => setShowInput(!showInput)} className="absolute right-0 text-gray-400 hover:text-white z-50"><I_Setting/></button>
                    </div>

                    {showInput && (
                        <div className="flex gap-4 mb-8 bg-black/30 p-4 rounded-xl animate-fade-in-up z-50 relative">
                            <div className="flex flex-col gap-1">
                                <label className="text-xs text-yellow-500 font-bold">FRONT</label>
                                <input value={frontText} onChange={e=>setFrontText(e.target.value)} className="bg-black/40 border-b border-white/20 px-2 py-1 outline-none w-24 text-center"/>
                            </div>
                            <div className="flex flex-col gap-1">
                                <label className="text-xs text-gray-400 font-bold">BACK</label>
                                <input value={backText} onChange={e=>setBackText(e.target.value)} className="bg-black/40 border-b border-white/20 px-2 py-1 outline-none w-24 text-center"/>
                            </div>
                        </div>
                    )}

                    <div className="coin-container my-10">
                        <div className="coin" style={{ transform: `rotateY(${rotation}deg)` }}>
                            <div className="coin-face coin-front">
                                <div className="text-6xl mb-2">üëë</div>
                                <div className="text-2xl font-black">{frontText}</div>
                            </div>
                            <div className="coin-face coin-back">
                                <div className="text-6xl mb-2">‚öì</div>
                                <div className="text-2xl font-black">{backText}</div>
                            </div>
                        </div>
                    </div>

                    <button 
                        onClick={flip} 
                        disabled={isFlipping} 
                        className={`mt-12 px-16 py-5 rounded-full text-2xl font-black shadow-[0_0_40px_rgba(251,191,36,0.4)] transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:scale-100 bg-gradient-to-r from-yellow-400 to-amber-600 text-white`}
                    >
                        {isFlipping ? "..." : t.coinFlip}
                    </button>

                    {result && !isFlipping && (
                        <div className="mt-10 text-center animate-fade-in-up">
                            <div className="text-gray-400 text-sm mb-2">{t.coinRes}</div>
                            <div className="text-5xl font-black text-yellow-300 neon-text">{result}</div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

